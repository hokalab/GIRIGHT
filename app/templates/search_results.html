<!doctype html>
<html>
<head>
<title>GIRIGHT | æ¤œç´¢çµæœ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<nav class="navbar">
  <a href="{{ url_for('main.index') }}">ğŸ  ãƒ›ãƒ¼ãƒ </a>
  <a href="{{ url_for('main.search_gear') }}">ğŸ” æ¤œç´¢</a>
  <a href="{{ url_for('main.add_gear') }}">â• ã‚®ã‚¢è¿½åŠ </a>
  <a href="{{ url_for('main.packlist') }}">ğŸ’ ãƒ‘ãƒƒã‚¯ãƒªã‚¹ãƒˆ</a>
  <a href="{{ url_for('main.stats') }}">ğŸ“Š ã‚¹ã‚¿ãƒƒãƒ„</a>
</nav>
<div class="container">
{# Removed existing_names definition as it is no longer needed #}
  <div style="margin-bottom: 1em;">
    <strong>ã‚«ãƒ†ã‚´ãƒªã§çµã‚Šè¾¼ã¿ï¼š</strong>
    {% for cat in ['shelter', 'sleep', 'pack', 'cook', 'wear', 'water', 'elec', 'misc'] %}
      {% if selected_category == cat %}
        <strong style="color: purple;">{{ cat }}</strong>
      {% else %}
        <a href="{{ url_for('main.search_gear', category=cat) }}" style="margin-right: 10px;">{{ cat }}</a>
      {% endif %}
    {% endfor %}
    <a href="{{ url_for('main.search_gear') }}">[ å…¨è¡¨ç¤º ]</a>
  </div>
  <h1>ğŸ” ã€Œ{{ query }}ã€ã®æ¤œç´¢çµæœ</h1>

  {% if results %}
    <table border="1" cellpadding="6" cellspacing="0" style="border-collapse: collapse; width: 100%;">
      <thead style="background-color: #f0f8ff;">
        <tr>
          <th>é‡è¤‡</th>
          <th>ã‚®ã‚¢å</th>
          <th>é‡ã•</th>
          <th>ã‚«ãƒ†ã‚´ãƒª</th>
          <th>ãƒ¡ãƒ¼ã‚«ãƒ¼</th>
          <th>ãƒ¡ãƒ¢</th>
          <th>ğŸ“¥ ç™»éŒ²</th>
          <th>âš¡ ã™ãç™»éŒ²</th>
        </tr>
      </thead>
      <tbody>
        {% for gear in results %}
        {% set gear_key = gear.name ~ '|' ~ gear.manufacturer ~ '|' ~ gear.category %}
        {% set row_color = '#ffffff' if loop.index0 % 2 == 0 else '#e6f7ff' %}
        <tr style="background-color: {{ row_color }};">
        {% if gear_key in existing_keys %}
  <td style="color: red; font-weight: bold;">âš ï¸ ç™»éŒ²æ¸ˆã¿</td>
{% else %}
  <td></td>
{% endif %}
          <td><strong>{{ gear.name }}</strong></td>
          <td>{{ gear.weight }}g</td>
          <td>{{ gear.category }}</td>
          <td>{{ gear.manufacturer }}</td>
          <td><em>{{ gear.notes }}</em></td>
          <td>
            <form action="{{ url_for('main.add_gear') }}" method="get">
              <input type="hidden" name="name" value="{{ gear.name }}">
              <input type="hidden" name="manufacturer" value="{{ gear.manufacturer }}">
              <input type="hidden" name="weight" value="{{ gear.weight }}">
              <input type="hidden" name="category" value="{{ gear.category }}">
              <input type="hidden" name="notes" value="{{ gear.notes }}">
              <button type="submit">ğŸ“¥</button>
            </form>
          </td>
          <td>
            <form action="{{ url_for('main.quick_add') }}" method="post">
              <input type="hidden" name="name" value="{{ gear.name }}">
              <input type="hidden" name="manufacturer" value="{{ gear.manufacturer }}">
              <input type="hidden" name="weight" value="{{ gear.weight }}">
              <input type="hidden" name="category" value="{{ gear.category }}">
              <input type="hidden" name="notes" value="{{ gear.notes }}">
              <button type="submit">âš¡</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>è©²å½“ã™ã‚‹ã‚®ã‚¢ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
  {% endif %}

  <a href="{{ url_for('main.index') }}">â† æˆ»ã‚‹</a>
</div>
</body>
</html>
