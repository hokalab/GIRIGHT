<!doctype html>
<html>
<head>
  <title>GIRIGHT | ã‚®ã‚¢ä¸€è¦§</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <nav class="navbar">
    <a href="{{ url_for('main.index') }}">ğŸ  ãƒ›ãƒ¼ãƒ </a>
    <a href="{{ url_for('main.search_gear') }}">ğŸ” æ¤œç´¢</a>
    <a href="{{ url_for('main.add_gear') }}">â• ã‚®ã‚¢è¿½åŠ </a>
    <a href="{{ url_for('main.packlist') }}">ğŸ’ ãƒ‘ãƒƒã‚¯ãƒªã‚¹ãƒˆ</a>
    <a href="{{ url_for('main.stats') }}">ğŸ“Š ã‚¹ã‚¿ãƒƒãƒ„</a>
  </nav>
  <div class="container">
    <form method="GET" action="{{ url_for('main.search_gear') }}">
      <input type="text" name="q" placeholder="ã‚®ã‚¢ã‚’æ¤œç´¢" required>
      <button type="submit">ğŸ” æ¤œç´¢</button>
    </form>
    
    <h1>ğŸ’ GIRIGHT - ã‚®ã‚¢ä¸€è¦§</h1>
    <a href="{{ url_for('main.add_gear') }}">â• ã‚®ã‚¢ã‚’è¿½åŠ </a>
    
    {% set categories = {} %}
    {% for gear in gears %}
      {% set _ = categories.setdefault(gear.category, []) %}
      {% set _ = categories[gear.category].append(gear) %}
    {% endfor %}

    {% for category, items in categories.items() %}
      <h2>{{ category|capitalize }}</h2>
      <ul>
        {% for gear in items %}
        <li>
          <strong>{{ gear.name }}</strong> ({{ gear.weight }}g) - {{ gear.category }}{% if gear.essential %} [å¿…æº]{% endif %} - 
          {{ gear.manufacturer }} - 
          <em>{{ gear.notes }}</em>
          <form action="{{ url_for('main.delete_gear', gear_id=gear.id) }}" method="post" style="display:inline;">
            <button type="submit" onclick="return confirm('æœ¬å½“ã«å‰Šé™¤ã™ã‚‹ï¼Ÿ')">ğŸ—‘ å‰Šé™¤</button>
          </form>
          <a href="{{ url_for('main.edit_gear', gear_id=gear.id) }}">âœï¸ ç·¨é›†</a>
          <form action="{{ url_for('main.toggle_pack', gear_id=gear.id) }}" method="post" style="display:inline;">
            <button type="submit">
              {% if gear.is_packed %}
                âœ… æŒã£ã¦ã
              {% else %}
                â– æŒãŸãªã„
              {% endif %}
            </button>
          </form>
        </li>
        {% endfor %}
      </ul>
    {% endfor %}
  </div>
</body>
</html>